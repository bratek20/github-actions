name: 'Run Tests'
description: 'Build and test Java project with Gradle'
inputs:
  github-token:
    description: 'GitHub Token for authentication'
    required: true
runs:
  using: 'composite'
  steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-java@v3
      with:
        java-version: '17'
        distribution: 'corretto'

    - name: Setup Gradle
      uses: gradle/gradle-build-action@v3

    - name: Make gradlew executable
      run: chmod +x ./gradlew
      shell: bash

    - name: Build with Gradle
      run: ./gradlew build
      shell: bash
      env:
        GITHUB_TOKEN: ${{ inputs.github-token }}

    - name: Test Summary
      uses: test-summary/action@v2
      with:
        paths: "build/test-results/test/**/*.xml"
      if: always()
